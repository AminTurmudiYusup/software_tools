# 2. Оверкоммит

**A. Информация о моей ОС и ОЗУ**


![overcommit_1](https://github.com/user-attachments/assets/7e604534-7194-4495-a51a-ffa18b1f99cf)


**B. создать программу, которая выделяет большой кусок памяти, чтобы наблюдать, как операционная система обрабатывает управление памятью.**
   1. Импортировать/включить в программу используемую библиотеку или заголовочный файл


![overcommit_2](https://github.com/user-attachments/assets/fb91ef6f-a224-4fe1-b99a-a255a926f6d3)

   2. определить размер страницы, частоту пауз (пауза после определенной страницы) и определить длительность паузы


![overcommit_3](https://github.com/user-attachments/assets/9a103a92-f841-44fa-bb92-e2885a085612)


   3. прочитать номер выделенной памяти из параметра командной строки


![overcommit_4](https://github.com/user-attachments/assets/baed21dd-1682-4457-bf6a-da365432cde7)


   4. Доступ к выделенной памяти с шагом 4 КБ (операция записи)


![overcommit_5](https://github.com/user-attachments/assets/3a87be6b-c274-4d26-a4dd-42c84aabdbfd)


   5. Доступ к выделенной памяти с шагом (операция чтения)


![overcommit_6](https://github.com/user-attachments/assets/07fe0042-9703-4c12-9522-b01af54754b9)


   6. Ввести паузу. Эта пауза дает ОС время для обработки запросов памяти и предотвращает зависание системы.



![overcommit_7](https://github.com/user-attachments/assets/9dab9918-6fa8-4553-b32d-51a7e9750df9)


**C. Создать скрипт Bash для компиляции, назначить параметр программе и запустить программу**


![overcommit_9](https://github.com/user-attachments/assets/d64b24e8-e7bf-458e-a2bc-68e6125e3536)


**D. Как запустить программу**


![overcommit_8](https://github.com/user-attachments/assets/d418dbb9-4d65-4b0b-9990-f7037ec4ec02)


**E. Отслеживать потребление памяти**
   1. Моя оперативная память 15,5 ГиБ
   2. Проверьте используемую оперативную память перед запуском программы

![overcommit_11](https://github.com/user-attachments/assets/41a5383e-4cb4-47f8-9cc7-8cbfeb1b34a6)

   3. Использовал всю оперативную память для запуска программы
      - Количество страниц из 16 ГиБ =16 * 1024 * 1024 * 1024 / 4096=4194304
      - Назначьте это значение (4194304) в параметре
     
![overcommit_12](https://github.com/user-attachments/assets/3aac9625-a576-4c8f-8dda-75571beaa0bf)


   4. Запустите программу и проверьте оперативную память в середине выполнения программы

![overcommit_13](https://github.com/user-attachments/assets/1a721ef5-6095-48a7-b1b9-8bd4a8b2e551)


![overcommit_14](https://github.com/user-attachments/assets/a674312e-e3f0-46c4-b942-d3e1847cc54c)



   5. Если я запущу эту программу, пока в оперативной памяти не останется свободного места
      - Мой компьютер может зависнуть или стать очень медленным.
   6. Когда я запускаю программу в ОС Windows


      
      <img width="960" alt="overcommit_1" src="https://github.com/user-attachments/assets/cef89eb5-b419-4e5b-9b5f-2d9f9d9e7b1f">



<img width="960" alt="overcommit_2" src="https://github.com/user-attachments/assets/bc4f6d58-3909-446e-88df-a9d19ca8df15">

     




**F. Заключение**
##### При использовании malloc в вашей программе ОС не выделяет сразу физическую оперативную память для всей запрошенной памяти. Вместо этого она резервирует виртуальную память.
##### При начале записи или чтения выделенной памяти ОС назначает физическую оперативную память виртуальным страницам, к которым обращается ваша программа.
##### Если программа запрашивает больше памяти, чем имеется в системе, ОС начинает использовать пространство подкачки (виртуальную память на диске).
##### Когда вы используете malloc для выделения памяти, операционная система не сразу выделяет физическую память непосредственно вашей программе.
   - Но операционная система резервирует виртуальный диапазон адресов для вашей программы.
   - Однако ОС не сразу назначает физическую память этим виртуальным адресам.
   - Физическая память (ОЗУ) назначается по требованию, когда программа фактически обращается к выделенной памяти.
   - Физическая память назначается фрагментами размером со страницу (обычно 4 КиБ).
   - Такое поведение известно как ленивое выделение. ОС откладывает назначение физической памяти, чтобы сократить отходы, поскольку не вся выделенная память обязательно используется.
